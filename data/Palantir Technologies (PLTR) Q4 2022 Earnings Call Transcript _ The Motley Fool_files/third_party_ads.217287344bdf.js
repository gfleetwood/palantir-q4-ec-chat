window.fool=window.fool||{};window.fool.ads={init:function(){var timeout=1000;var adRequestMade=false;function requestAds(context){if(adRequestMade){return;}
adRequestMade=true;let adUnits=window.adUnits;context.loadPrebidAds(adUnits);context.initGpt();}
function onTimeout(context){requestAds(context);}
setTimeout(function(){onTimeout(this)}.bind(this),timeout);},initGpt:function(){console.log('initializing Google Publisher Tags');googletag.cmd.push(function(){googletag.setAdIframeTitle("Advertisement");});googletag.cmd.push(function(){googletag.pubads().enableSingleRequest();googletag.pubads().disableInitialLoad();googletag.enableServices();googletag.pubads().addEventListener('slotOnload',function(e){var slot=e.slot;var path=slot.getAdUnitPath();var n=path.search(/sticky|header_mobtab/);if(n>0){var leaderboard=$('.sticky-header-ads-container');if(leaderboard.length>0&&leaderboard.css('position')==='fixed'){var ADwrapper=$('#sticky-wrapper');if(leaderboard.outerHeight()>=140){ADwrapper.height(leaderboard.outerHeight());}
setTimeout(function(){leaderboard.css('position','static');$('#sticky-wrapper').css('min-height','auto');const alert=document.querySelector("#alert-banner div");if(!alert){leaderboard.css('margin-top','0');}},3000);}}});});},loadPrebidAds:function(adUnits,adSlots=null){if(!window.prebidFool){return;}
var timeout=this.getPrebidTimeout();window.setTimeout(function(){pbjs.que.push(function(){pbjs.addAdUnits(adUnits);pbjs.requestBids({bidsBackHandler:function(){console.log('sending DFP request');console.log(pbjs.getBidResponses());googletag.cmd.push(function(){pbjs.que.push(function(){pbjs.setTargetingForGPTAsync();if(adSlots){googletag.pubads().refresh(adSlots);}else{googletag.pubads().refresh();}});});}});});},timeout);},getPrebidTimeout:function(){function isInteger(num){return(num^0)===num;}
if(typeof prebidFool.timeout!='undefined'&&isInteger(prebidFool.timeout)){return prebidFool.timeout;}
return 2000;},loadFreshAds:function(adUnits){if(!adUnits){googletag.cmd.push(function(){googletag.pubads().refresh();});return;}
while(pbjs.que.length>0){pbjs.que.pop();}
pbjs.removeAdUnit();var targetingIds=[];for(var i in adUnits){targetingIds.push(adUnits[i].code);}
var newAdSlots=[];Object.keys(window.slots).forEach(function(key){if(targetingIds.indexOf(key)>-1){newAdSlots.push(window.slots[key]);}});if(!window.prebidFool){googletag.cmd.push(function(){googletag.pubads().refresh(newAdSlots);});}else{this.loadPrebidAds(adUnits,newAdSlots)}}};fool.ads.init();